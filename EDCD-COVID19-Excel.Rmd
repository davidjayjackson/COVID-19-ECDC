---
title: "ECDC COVID-19 Excel Spreadsheet"
author: "David J Jackson"
date: "4/5/2020"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(forecast)
library(data.table)
library(lubridate)
theme_set(theme_linedraw())
```
```{r,echo=FALSE}
ECDC <- readxl::read_xlsx("./ECDC-COVID-19.xlsx") %>% 
  select(dateRep,cases,deaths,countriesAndTerritories,countryterritoryCode)
colnames(ECDC) <- c("Date","Cases","Deaths","Countries","Code")
ECDC$Date <- as.Date(ECDC$Date)
USA <- ECDC %>% filter(Code=="USA")
```
```{r}
USA %>% ggplot() + geom_col(aes(x=Date,y=Cases,fill=Date)) +
  labs(title="USA Daily Case Totals")
```
```{r}
USA %>% ggplot() + geom_col(aes(x=Date,y=Deaths,fill=Date)) +
  labs(title="USA Daily Deaths Totals")
```
```{r}
USA_weekly <- USA %>% group_by(Weekly =floor_date( Date,"week")) %>% 
  summarise(
             tc = sum(Cases),
             td = sum(Deaths),                                                                    perdeaths = td/tc, Count = n())
```
```{r}
USA_weekly %>% ggplot() + geom_col(aes(x=Weekly,y=tc,fill=Weekly)) +
  labs(title="USA Weekly Case Totals")
```
```{r}
USA_weekly  %>% ggplot() + geom_col(aes(x=Weekly,y=td,fill=Weekly)) +
  labs(title="USA Weekly Deaths Totals")
```
```{r}
PAK <- ECDC %>% filter(Code=="PAK")
```
```{r}
PAK %>% ggplot() + geom_col(aes(x=Date,y=Cases,cill=Date)) +
  labs(title="PAK Daily Case Totals")
```
```{r}
PAK %>% ggplot() + geom_col(aes(x=Date,y=Deaths,fill=Date)) +
  labs(title="PAK Daily Deaths Totals")
```
```{r}
PAK_weekly <- PAK %>% group_by(Weekly =floor_date( Date,"week")) %>% 
  summarise(
             tc = sum(Cases),
             td = sum(Deaths),                                                                    perdeaths = td/tc, Count = n())
```
```{r}
PAK_weekly %>% ggplot() + geom_col(aes(x=Weekly,y=tc,fill=Weekly)) +
  labs(title="PAK Weekly Case Totals")
```
```{r}
PAK_weekly  %>% ggplot() + geom_col(aes(x=Weekly,y=td,fil=Weekly)) +
  labs(title="PAK Weekly Deaths Totals")
```
