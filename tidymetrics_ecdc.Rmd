---
title: "TidyMetrics and China Flu (COVID-19)"
author: "David J Jackson"
date: "4/1/2020"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(tidymetrics)
library(RSQLite)
```
```{r}
db <- dbConnect(SQLite(), dbname="../db/CORVID.sqlite3")
ECDC <- dbGetQuery(db, "SELECT Reported,Countries,Cases,Deaths,Population FROM ECDC;")
colnames(ECDC) <- c("date","Countries","Cases","Deaths","Population")
ECDC$date <- as.Date(ECDC$date)
```
```{r}
ECDC_daily <- ECDC %>% group_by(date) %>% 
  summarise(Cases=sum(Cases),
  Deaths = sum(Deaths))

ECDC_metrics <- ECDC_daily %>%
  cross_by_dimensions(Cases) %>%
  cross_by_periods(c("day","month","quarter","year"))

```